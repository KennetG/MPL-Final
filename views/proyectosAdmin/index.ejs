<% layout('layouts/adminPlantilla') %>
<h1 class="d-flex">Panel de Proyectos</h1>
<a href="/proyectos/nuevo"><button class="btn btn-primary">Nuevo Proyecto</button></a>
<div class="row">
  <div class="col mt-3">
    <div class="card">
      <div class="card-body">
        <div class="table-responsive">
          <table class="table table-hover align-middle table-bordered">
            <thead class="text-center">
              <th>Categoría</th>
              <th>Título</th>
              <th>Descripción</th>
              <th>Imagen</th>
              <th>Detalles</th>
              <th>Editar</th>
              <th>Eliminar</th>
            </thead>
            <tbody>
              <% for( let proyecto of proyectos ) { %>
              <tr>
                <td><%= proyecto.categoria.nombre %></td>
                <td><%= proyecto.titulo %></td>
                <td><%= proyecto.descripcion %></td>
                <% if (proyecto.images.length) { %>
                <td><img src="<%= proyecto.images[0].thumbnail %>" alt="" /></td>
                <% } else { %>
                <td><img src="https://res.cloudinary.com/dmi3zyqqf/image/upload/v1621294364/mpl/no_picture_zf7mbj_oghqup.png" alt="no image" class="img-fluid" /></td>
                <% } %>
                <td class="text-center">
                  <a href="/proyectos/<%= proyecto._id %>/detalle"><i class="bi bi-eye text-primary"></i></a>
                </td>
                <td class="text-center">
                  <a href="/proyectos/<%= proyecto._id %>/editar"><i class="bi bi-pencil text-primary"></i></a>
                </td>
                <td class="text-center">
                  <form action="/proyectos/<%= proyecto._id %>?_method=DELETE" method="post">
                    <button class="btn btn-primary"><i class="bi bi-trash"></i></button>
                  </form>
                </td>
              </tr>
              <% } %>
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </div>
</div>
